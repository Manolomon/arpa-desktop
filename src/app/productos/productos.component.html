<mat-toolbar>
  <mat-toolbar-row>
    <span style="padding-top: 13px;"><p style="color: #47485D">Arpa Desktop</p></span>
    <span class="example-spacer"></span>

    <mat-icon class="example-icon" style="color: #47485D"
      >account_circle</mat-icon
    >
  </mat-toolbar-row>
</mat-toolbar>

<content>
  <div class="example-margin" layout="row">
    <img
      style="padding-right: 15px;"
      src="../assets/product-icon.svg"
      alt="Product-Icon"
    />
    <div fxLayout="column" fxLayoutGap="-1px" fxFlex="80">
      <h2>Productos</h2>
      <p class="subtitle">Administración y Registro de Producción Académica</p>
    </div>
    <div fxLayout="row" fxLayoutAlign="end center">
      <mat-form-field appearance="outline">
        <mat-label>Buscar Producto</mat-label>
        <input matInput />
        <mat-icon matSuffix style="color: #A9ADCC;">search</mat-icon>
      </mat-form-field>
    </div>
  </div>
  <div layout="row" style="padding-bottom: 25px;">
    <div fxLayout="column" fxFlex="10"></div>
    <div fxLayout="column" fxFlex="70">
      <p class="additional_info">Vista de la producción individual del miembro</p>
    </div>
    <div fxLayout="row" fxLayoutAlign="end center">
      <div class="dropdown">
        <button
          (click)="showNotification($event)"
          class="btn btn-primary dropdown-toggle"
          type="button"
          id="dropdownMenu2"
          data-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="false"
        >
          Agregar Producto
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
          <button class="dropdown-item" type="button"  (click)="agregarProducto('articulo')">Artículo</button>
          <button class="dropdown-item" type="button" (click)="agregarProducto('capitulo')">Capítulo de Libro</button>
          <button class="dropdown-item" type="button" (click)="agregarProducto('libro')">Libro</button>
          <button class="dropdown-item" type="button" (click)="agregarProducto('memoria')">Memoria</button>
          <button class="dropdown-item" type="button" (click)="agregarProducto('produccion')">Producción Innovadora</button>
          <button class="dropdown-item" type="button" (click)="agregarProducto('tesis')">Tesis</button>
        </div>
      </div>
    </div>
    <mat-divider class="br_div"></mat-divider>
  </div>
  <div fxFlexAlign="center" fxLayoutAlign="center center">
    <app-capitulo
    [habilitaCampos]="true"
      (creacionCancelada)="creacionCancelada($event)"
      *ngIf="agregaProducto && tipoProducto === 'capitulo'">
    </app-capitulo>
    <app-articulo
    [habilitaCampos]="true"
      (creacionCancelada)="creacionCancelada($event)"
      *ngIf="agregaProducto && tipoProducto === 'articulo'">
    </app-articulo>
    <app-tesis
    [habilitaCampos]="true"
      (creacionCancelada)="creacionCancelada($event)"
      *ngIf="agregaProducto && tipoProducto === 'tesis'">
    </app-tesis>
    <app-produccion
      [habilitaCampos]="true"
      (creacionCancelada)="creacionCancelada($event)"
      *ngIf="agregaProducto && tipoProducto === 'produccion'">
    </app-produccion>
    <app-libro
    [habilitaCampos]="true"
      (creacionCancelada)="creacionCancelada($event)"
      *ngIf="agregaProducto && tipoProducto === 'libro'">
    </app-libro>
    <app-memoria
    [habilitaCampos]="true"
      (creacionCancelada)="creacionCancelada($event)"
      *ngIf="agregaProducto && tipoProducto === 'memoria'">
    </app-memoria>
  </div>
  <div fxFlexAlign="center" fxLayoutAlign="center center">
    <mat-accordion class="example-headers-align">
      <mat-expansion-panel
      [expanded]="indexExpanded == i"
      (opened)="indexExpanded = i"
      (afterExpand)="indexExpanded = i"
      (closed)="togglePanels(-1)"
        *ngFor="let producto of productos; let i = index"
        class="hideOption"
      >
        <mat-expansion-panel-header>
          <mat-panel-title>
            <p>{{ producto.titulo }}</p>
          </mat-panel-title>
          <mat-panel-description>
            <mat-chip-list>
              <mat-chip color="primary" selected>
                {{
                  producto.tipo.charAt(0).toUpperCase() + producto.tipo.slice(1)
                }}
              </mat-chip>
            </mat-chip-list>
            <div class="example-icon showOption">
              <button *ngIf="indexExpanded == i" (click)="habilitarCampos(); togglePanels(i)"
                mat-icon-button
                matTooltip="Editar"
                matTooltipPosition="above"
              >
                <mat-icon aria-label="Edit Button"
                  >edit</mat-icon
                >
              </button>
              <button (click)="eliminarProducto(i)"
                mat-icon-button
                *ngIf="indexExpanded == i"
                matTooltip="Eliminar"
                matTooltipPosition="above"
              >
                <mat-icon aria-label="Delete Button"
                  >delete</mat-icon
                >
              </button>
            </div>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <app-capitulo
          [capituloObjeto]="producto"
          [habilitaCampos] = "camposHabilitados"
          [eliminarProducto] = "eliminaProducto"
          *ngIf="producto.tipo === 'capitulo'"
        ></app-capitulo>
        <app-tesis
          [tesisObjeto]="producto"
          [habilitaCampos]="camposHabilitados"
          [eliminarProducto]="eliminaProducto"
          *ngIf="producto.tipo === 'tesis'">
        </app-tesis>
        <app-libro
          [libroObjeto]="producto"
          [habilitaCampos]="camposHabilitados"
          [eliminarProducto]="eliminaProducto"
          *ngIf="producto.tipo === 'libro'">
        </app-libro>
        <app-memoria
          [memoriaObjeto]="producto"
          [habilitaCampos]="camposHabilitados"
          [eliminarProducto]="eliminaProducto"
          *ngIf="producto.tipo === 'memoria'">
        </app-memoria>
        <app-articulo
          [articuloObjeto]="producto"
          [habilitaCampos]="camposHabilitados"
          [eliminarProducto]="eliminaProducto"
          *ngIf="producto.tipo === 'articulo'">
        </app-articulo>
       <app-produccion
          [produccionObjeto]="producto"
          [habilitaCampos]="camposHabilitados"
          [eliminarProducto]="eliminaProducto"
          *ngIf="producto.tipo === 'produccion'">
        </app-produccion>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</content>
<notifier-container></notifier-container>
